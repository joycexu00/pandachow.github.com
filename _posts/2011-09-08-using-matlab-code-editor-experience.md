---
layout: post
title: MATLAB 代码编辑器使用经验
categories:
- technology
tags:
- MATLAB
---

纵然许多问题都可以用 Simulink 来解决问题，Simulink 对 MATLAB 的优势也是非常明显的：直观！不用去写大量复杂的代码就可以完成相同的工作，但是 MATLAB 语言的编程才是 MATLAB 的核心，很多地方更是 Simulink 无法比拟的（后面再说），那m文件的编写用什么编辑器呢？VIM/Emacs？当然可以，但是我个人还是推荐原生的m文件编辑器（我本人也是Emacs党），原因有这么几点：

1. 如果函数不熟的话可以直接调用自带的 function 查询
2. 断点单步调试
3. 能编辑脚本、函数、类、枚举等等的 MATLAB 文件类型
4. 拖拉编辑
5. 代码运行效率分析

下面简单谈谈自己使用这个自带的编辑器的一些心得吧

## 不支持的语法提示
这个问题也是比较常见的，尤其是一些听说 MATLAB 和 C/C++ 很相似的语言的人就会经常犯这样的错误。因为一些特殊的符号虽然在MATLAB里面不能用，但并不表示这些符号在 MATLAB 里面不能用，只是用法不同而已，大量的语法错误就是这么来的。一般出现这种情况，编辑器里面是会出现红色圆圈里面有个小叉。

## 警告提示和错误提示
这种情况也是比较常见的，其实在像 Eclipse/Kdevelop 等很多大型的IDE里面也是比较常见，警告的意思也就是MATLAB怀疑你使用了错误的命令和结构，但是在逻辑和语法上是没有什么问题的。编辑器里面会出现黄色的小三角形里面有个感叹号，旁边也会有橘黄色的横杠。其实一般来说我都不管的。。。错误提示就不用说了，程序是无法运行的，一般都是语法错误。

## 几个常用的快捷键
有几个在源代码编辑器中的快捷键很管用，推荐掌握，Ctrl+R 注释选定代码，Ctrl+T取消注释，调试的 F5，F10，F11 之类，终止运行中的程序 Ctrl+C。另外，如果你在源码编辑器中阅读源代码时遇到一个函数想查看，直接在函数上点右键，选择 open selection 即可。MATLAB 保存之后的代码也是可以撤销的，甚至可以撤销到打开MATLAB时最原始时候的状态。因此应该常保存，以便于防止文档丢失。源码中可以通过两个百分号“%%”分割源码，在编辑器的左边点一下会出现红点（断点调试工具），可以步进，步退调试，这两个功能对于较长的代码的调试和阅读都是非常有利的。

## 说说 Simulink
对于是否使用 Simulink，我认为它很直观，但是缺点是效率不高（主要针对通信物理层仿真），尤其是蒙特卡洛仿真这种需要大数据量的循环仿真。当时曾经尝试过，学长用 Simulink 去做，跑5万点就慢死了，我自己用代码来写，跑到50万点比他的快很多，后来又通过提取函数内部实现和矩阵优化等方法又有了很大的提升。有时发现循环和判断太多了，只能用 C 来做。这是 MATLAB 的很多库函数的选择，因此如果你需要更高的效率，也可以这样来做。MATLAB-C 联合编程虽然有利于提高运算效率（甚至可以利用好多核），但是很难调试C代码，在编写时一定要注意缓冲区溢出之类的问题，因为它会使整个 MATLAB 崩溃而重启。因此最好先在VC调试好，再跟接口连接起来。当然，调试的时候C代码部分没法单步，但是 printf 还是可以用的。另外，MATLAB的界面制作工具很好用，而且做出来的东西很赞，建议花点时间学一学，能够操纵按钮，读取复选框和文本的数值基本上就够用了，它会使你的结果汇报变得很直观。

## 另外多说一句
我们的 MATLAB 最好还是用最近的版本，经常用MATLAB的朋友可能会发现这一点：有时候从别人电脑上拷过来的代码在自己的电脑上就是没有办法运行，错误找起来非常麻烦，就算是知道区别，修改起来也非常麻烦。而且 MATLAB 本身也是在不断的完善和优化之中（虽然版本的镜像是越来越臃肿了。。。