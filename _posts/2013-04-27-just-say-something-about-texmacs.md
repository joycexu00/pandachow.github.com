---
layout: post
category: life
tagline: 我也要说说TeXmacs
tags: [Math, LaTeX, TeXmacs, Emacs, Typesetting]
---
起初在王垠大大的博客里面看到神器 [TeXmacs](http://www.yinwang.org/blog-cn/2012/09/18/texmacs/) 的推荐文，十分心动。就像他自己所说的，极少写什么软件推荐之类的文章。

>好久没有推荐过自己喜欢的软件了，现在推荐一款我在美国做数学作业的私家法宝：TeXmacs。我恐怕不可能跟以前那么有闲心写个长篇的 TeXmacs 说明文档了，不过这东西如此的简单好用，所以基本上不用我写什么文档了。

不过他既然长篇大论做此推荐，想必一定是有值得推荐的理由。

在 Windows 下尝试了一下，发现安装完打开立即闪退。Google 一番，发现是 Current version 的一个 Bug……实在是太扫兴了，没办法，只能到虚拟机里面过过干瘾。

恩，现在过完了干瘾，码完了公式，也写完了作业。我终于也有时间，也有兴致来谈谈这款软件了。

#TeXmacs是什么
恩，按照其官网的说法，这货是一个为科学工作者们提供诸多方便之处，并且 [__所见即所得__](https://en.wikipedia.org/wiki/WYSIWYG) 的编辑平台。

>GNU TeXmacs is a free WYSIWYW editing platform with special features for scientists.

所以，它既不是 TeX 的一个宏包，也不是 LaTeX 的一个前端，而是一套全新的排版系统，当然它本身也包括一个本文编辑器。

虽然它的名字里面包含了 TeX 和 (E)macs，但是其实它跟 TeX 和 Emacs 都没什么关系，仅仅是 __Inspired by TeX system and Emacs__ 而已。

#为什么不用 Word
当然了我这里所说的 Word 并不是特指微软的 Office 套件 Word，不过你可以这么认为。

* 太贵了。作为微软的拳头产品之一，一套正版的 MS Word 价格并不便宜，即便是学生价或者几个人 share 一套 license 也价格不菲。
* 缺少创建逻辑格式的工具。怎么说呢，想要在 Word 里面创建多级标题并不是一件多么容易的事情，比如在1和1.1之后我想开始2，按下回车，Word 很难识别我需要开始的是 2 还是 1.2；或者像这里一样的列表，如果每个列表只有一行文字，这并没有什么问题，倘若某个列表含有多行内容，甚至还混杂公式或者表格之类的东西，那么后面的列表Word就很难将它识别作续还是另起新的列表。
* 低劣的视觉逻辑格式。在 Word 中逻辑格式创建起来十分棘手，从viewer的角度来说也是十分难看。如果你不把前面表上 1.1 或者 3.2.1 这样的标号，即便是作者也很难判断出逻辑结构。相比之下，(La)TeX的`\section`和`\subsubsection`这样的写法在代码里面能让逻辑结构非常清晰。这点现在很多标记语言都做得非常不错，比如 [Markdown](http://en.wikipedia.org/wiki/Markdown)。
* 慢并且复杂。这是显而易见的，前端的图形界面越来越复杂，也是越来越大，尽管 Word 2013 相对以前来说确实是做出了很大的改进。可是还是会需要占用巨大内存和计算时间，尤其是排版长篇文章的时候，Word 可谓劣迹斑斑。
* 格式问题。这个问题简直不用我说，连 Word 用户自己都觉得烦恼，旧版本的 Word 在不安装新的 package 就没有办法修改甚至查看新版本的 Word 所创建的文件。即便是同一个版本的 Word 也会出现格式兼容的问题，尤其是公式和特殊字体，说起来满满都是泪。

除此之外，Word 所标榜的『所见即所得』其实也是非常有问题的，道理很简单，你在屏幕上所见到的和从打印机里面出来的东西并不一样。

#(La)TeX好不好
好，非常好。

高德纳先生的作品成功地将科技文排版人员从水深火热中解救了出来。免费、有`\section`和`\enumerate`等等的逻辑格式标记来帮助作者和审阅者理清逻辑关系和顺序、纯文本的 *.tex 格式以及非常稳定的程序，这些 features 让我们只需要一个顺手的 editor 就可以写出高质量的科技文档甚至是学术论文，不论是产量还是质量上都会甩 Word 几十条长安街。

那么，(La)TeX 这么好，这么优秀，又她妈不要钱，为什么 (La)TeX 还是流行不起来？为什么即便是在表现地捉襟见肘的学术界，Word 也仍然占有一席之地？

说白了，(La)TeX 太难了。它根本不是一般人能精通的。仅仅靠着 30 分钟的入门文档的东西实在是很难让你吃一辈子。

光命令就有上千，如果只算常用的也有好几十，再加上十几个常用宏包和以及搞清楚$$TeX$$，$$LaTeX$$，$$LaTeX2e$$，XeTeX，足够你吃上一阵子的。除此之外你还得熟悉至少一个 LaTeX 发行版，至少一个编辑器。这还不包括你碰上读模板文件、图表排版、使用。

于是真 Geek 们以及那些极力崇拜和模仿他们的伪 Geek 们开始大肆吹捧张扬『这才是真正的写作！』『看我写的是代码，生成的却是Paper！』。恕我直言，如果你们是因为 Word 的伪『所见即所得』以及糟糕的公式排版而不得已而选择(La)TeX，我十分同情你；如果你仅仅是为了炫耀自己是个 Geek 我只能说你是个傻逼。

原因就是『所见即所得』是最符合人类写作和阅读习惯的方式。而 Word 尽管并没有做到真正的『所见即所得』，但是它确是以其为目标为初衷的软件，并且离目标并不远，甚至在纯文字的情况下非常接近。从这个角度来说，__(La)TeX是反人类的__ ，尤其是当现在计算机已经具有非常强大的处理能力的时候。

曾经我为发现 [Lyx](http://www.lyx.org/) 这样的软件而一度窃喜，觉得大家可以从 (La)TeX 的坑里面跳出来的，后来才发现 Lyx 本身就是一个坑，它既不是真正的 WYSIWYW，也没法排出自己满意的格式，更没法和众多 (La)TeX 的模板相兼容。所以过去相当长的一段时间内自己都是使用一个编辑器配合 Lyx 来写作业，Lyx 很好地解决了公式输入以及绘制表格这样的麻烦事儿。但是，这仅仅是做到了公式以及表格的 WYSIWYW。

#TeXmacs 好在哪
* 排版好。美观，采用了与 TeX 一样的排版算法，并且用 C++ 重新实现。并且使用了统一的分页算法。
* 编辑即预览。像Word一样直接在编辑处预览，简单直观。不需要像 TeX 一样左边编辑器，右边还要开一个PDF Viewer。
* 数学公式输入。这个 feature 实在是让人难以难以置信的舒适。首先是支持 LaTeX 的语法，比如 `\lambda` 就可以直接生成 $$\lambda$$ 了，在就就是近似输入，比如按下`<<`就可以生成 $$\ll$$、按下`@+`就可以生成 $$\oplus$$ 、按下`->`就会出现 $$\rightarrow$$。再加上各种快捷键……
* 交互的程序接口。它还支持非常多的计算机代数系统，比如 PARI GP，MACAULAY 2 和 GTYBALT，更多的系统还在开发中。
* 语言扩展。就像Emacs 与 Emacs/Lisp 扩展一样，TeXmacs 提供了和 Guile/Scheme 语言拓展的能力。未来还会支持 Python 和 Caml。
* WYSIWYW。

除了这些，Manual 里面还提到了多行分词和支持竖直空隙的优化等等 TeX 没有的创新。

#做个总结
用了几天发现有偶尔确实有崩溃迹象。另外 Windows 的版本有 Bug 没法用。

客观地说，我觉得作为一款 WYSIWYW and structured technical text editor， TeXmacs 实在是是非常适合数学，物理以及计算机 Theory 方向学生拿来写作业的。至于格式规范的 Paper，还是得由市场说了算。